# 서로말 (Seoromal) 서비스 기획서
**"서로 말하고, 서로 배우다"**

> **참고**: 이 문서는 초안이며, 실제 구현 시 내용이 변경될 수 있습니다. 특히 DB 설계는 참고용입니다.

## 1. 서비스 개요

### 한 줄 소개
익명 음성/화상 기반 한일 언어교환 플랫폼

### 핵심 컨셉
- 일본어 배우고 싶은 한국인 ↔ 한국어 배우고 싶은 일본인
- 서로 가르쳐주고, 서로 배우는 호혜 구조
- 포인트(도토리)로 대화 시간 관리

### 슬로건
"서로 말하고, 서로 배우다"

---

## 2. 타겟 유저

### MVP 타겟
- 일본어 배우고 싶은 한국인
- 한국어 배우고 싶은 일본인

### 유저 니즈
- 학원/인강으로 배웠는데 실제 회화 기회가 없음
- 원어민이랑 부담 없이 연습하고 싶음
- 돈 들이지 않고 언어교환 하고 싶음

---

## 3. 용어 정의

| 용어 | 설명 |
|------|------|
| 호스트 | 방을 만들어 대화 상대를 기다리는 사람 |
| 게스트 | 방에 입장하여 대화하는 사람 |
| 모국어 | 유저의 네이티브 언어 |
| 학습언어 | 유저가 배우고 싶은 언어 |
| 도토리 (Acorn) | 서비스 내 포인트 단위 |

---

## 4. 핵심 기능

### 4.1 회원가입
- 소셜 로그인 (카카오 / 구글 / 애플 / LINE)
- 필수 입력: 닉네임, 모국어, 학습언어
- 가입 시 50 도토리 지급

### 4.2 방 만들기 (호스트)
**입력 항목:**
- 방 제목 (예: "한국어로 프리토킹 해요", "日本語で話しましょう")
- 대화 언어 선택 (한국어 / 일본어 / 둘 다)
- 대화 모드 선택 (음성 / 화상) ※ 화상은 개발만, 오픈 보류

방 만들면 대기 상태로 게스트 기다림

### 4.3 방 찾기 (게스트)
**방 목록 필터링:**
- 대화 언어별 (한국어 / 일본어 / 전체)
- 호스트 모국어별
- 대화 모드별 (음성 / 화상) ※ 화상은 오픈 보류

- 최소 1 도토리 필요
- 방 선택 후 입장 → 대화 시작

### 4.4 음성/화상 대화
- 1:1 익명 음성 또는 화상 통화
- 실시간 통화 시간 표시
- 남은 도토리로 최대 통화 가능 시간 표시
- 도토리 소진 시 자동 종료

### 4.5 평가 시스템
대화 종료 후 상대방 평가 (5단계)

| 점수 | 의미 |
|------|------|
| ⭐ | 별로예요 |
| ⭐⭐ | 아쉬워요 |
| ⭐⭐⭐ | 괜찮아요 |
| ⭐⭐⭐⭐ | 좋아요 |
| ⭐⭐⭐⭐⭐ | 최고예요 |

- 리뷰 등록하면: 1 도토리 획득
- ⭐⭐⭐⭐⭐ 받으면: 3 도토리 획득

---

## 5. 포인트 시스템 (도토리)

### 5.1 획득

| 방법 | 도토리 | 제한 |
|------|--------|------|
| 회원가입 | 50 | 최초 1회 |
| 무료 도토리 받기 | 10 | 4시간마다 1회 |
| 리뷰 등록 | 1 | 대화 후 |
| ⭐⭐⭐⭐⭐ 평가 받기 | 3 | 대화 후 |
| 호스트 활동 (분당) | 1/분 | - |

### 5.2 사용

| 항목 | 도토리 |
|------|--------|
| 통화료 (게스트) | 1/분 (올림) |

### 5.3 과금 규칙
- 입장 조건: 최소 1 도토리
- 15초 미만: 무료
- 15초 이상: 분당 1 도토리
- 보유 도토리 소진 시 자동 종료

### 5.4 정산 예시 (10분 대화)

| 구분 | 도토리 |
|------|--------|
| 게스트 | -10 |
| 호스트 | +10 |

※ 게스트가 ⭐⭐⭐⭐⭐ 평가 시 호스트 +3 추가
※ 리뷰 등록 시 게스트 +1 추가

---

## 6. 유저 플로우

### 6.1 호스트 플로우
로그인 → 방 만들기 → 제목/언어/모드 입력 → 대기 → 게스트 입장 → 대화 → 종료 → 도토리 획득 → 평가받기

### 6.2 게스트 플로우
로그인 → 방 목록 → 필터링 → 방 선택 → 입장 → 대화 → 종료 → 평가 → 도토리 차감 → 리뷰 도토리 획득

---

## 7. 매칭 로직

### 방 목록 표시 조건
- 게스트의 학습언어 = 호스트의 모국어
- 또는 대화 언어가 게스트의 학습언어와 일치

### 예시
**유저 A: 모국어 한국어, 학습언어 일본어**
→ 일본어 모국어 호스트 방 또는 일본어 대화방 노출

**유저 B: 모국어 일본어, 학습언어 한국어**
→ 한국어 모국어 호스트 방 또는 한국어 대화방 노출

---

## 8. 회원 체계

### 일반 회원
- 소셜 로그인
- 방 찾기 (게스트) 가능
- 방 만들기 (호스트) 가능
- 개인정보 최소 수집

### 파트너스 (향후)
- **조건**: 호스트 100시간 + 평점 4.5 이상
- **혜택**: 도토리 현금 환급 (100 도토리 = 10,000원)

---

## 9. 이용 규칙

### 금지 행위
- 욕설, 비하, 혐오 발언
- 성희롱, 성적 발언
- 개인정보 요구 (연락처, SNS 등)
- 광고, 홍보, 영업 행위
- 언어교환 외 목적 이용

### 제재

| 사유 | 제재 |
|------|------|
| 평점 2.0 미만 | 경고 |
| 신고 누적 | 서비스 이용 제한 |
| 심각한 위반 | 영구 정지 |

---

## 10. 화면 구성

### 메인 화면
- 방 찾기 버튼
- 방 만들기 버튼
- 내 도토리 잔액
- 무료 도토리 받기 (4시간마다)

### 방 목록 화면
- 필터 (언어별, 모드별)
- 방 카드 (제목, 호스트 모국어, 대화 모드, 대기 시간)

### 방 만들기 화면
- 방 제목 입력
- 대화 언어 선택
- 대화 모드 선택 (음성만 노출, 화상은 보류)

### 대화 화면
- 통화 시간 표시
- 최대 가능 시간 표시
- 음소거 버튼
- (화상 시) 카메라 ON/OFF
- 종료 버튼

### 평가 화면
- 별점 5단계 선택
- 한줄 리뷰 (선택)

### 마이페이지
- 도토리 잔액
- 무료 도토리 받기
- 대화 기록
- 내 평점
- 언어 설정 변경

---

## 11. 기술 스택

| 구분 | 기술 |
|------|------|
| Frontend | Next.js 14 (App Router) |
| Backend | Express.js + Socket.io |
| Database | Supabase (PostgreSQL) |
| 음성/화상 | Agora Voice/Video SDK |
| 인증 | Supabase Auth |
| 배포 | Vercel (client) + Fly.io (server) |

---

## 12. 데이터베이스 설계

> **참고**: 실제 구현 시 변경될 수 있습니다.

### users
`id, email, provider, nickname, native_language, learning_language, acorns, last_free_acorn_at, created_at`

### calls
`id, host_id, guest_id, mode (voice/video), started_at, ended_at, duration_seconds, acorns_used, acorns_earned, status`

### ratings
`id, call_id, from_user_id, to_user_id, score (1-5), review_text, created_at`

### acorn_transactions
`id, user_id, amount, type (signup/free/call_earned/call_used/review/rated), reference_id, balance_after, created_at`

### rooms (메모리 관리, DB 저장 X)
`id, title, host_id, host_native_language, conversation_language, mode (voice/video), status, created_at`

---

## 13. MVP 범위

### 포함
- 소셜 로그인 (카카오, 구글)
- 언어 설정 (한국어 / 일본어)
- 방 만들기 / 찾기
- 1:1 음성 통화
- 1:1 화상 통화 (개발만, 오픈 보류)
- 도토리 시스템
- 무료 도토리 받기 (4시간마다)
- 5단계 평가 시스템
- 다국어 UI (한국어 / 일본어)

### 미포함 (향후)
- LINE 로그인
- 애플 로그인
- 다른 언어 추가 (영어, 중국어 등)
- 화상 모드 정식 오픈
- 파트너스 환급
- 도토리 유료 구매

---

## 14. 향후 로드맵

### Phase 2
- 화상 모드 정식 오픈
- 영어, 중국어 추가
- LINE / 애플 로그인

### Phase 3
- 레벨 시스템 (초급/중급/고급)
- 주제별 방 카테고리
- 아바타 기능 (화상 시 익명 유지)

### Phase 4
- 파트너스 제도 (현금 환급)
- 도토리 유료 구매
- 전문 튜터 모드

---

## 15. 다국어 처리 (i18n)

### 지원 언어
- 한국어 (ko)
- 일본어 (ja)

### 주요 번역 항목
- UI 텍스트 전체
- 알림 메시지
- 이용약관 / 개인정보처리방침

### 언어 감지
- 브라우저 언어 설정 기반 자동 감지
- 수동 변경 가능

---

## 16. 수익 모델

### MVP
없음 (무료 운영)

### 향후
- 도토리 유료 구매
- 프리미엄 기능 (무제한 대화 등)
- 전문 튜터 수수료

---

## 17. KPI

### 핵심 지표
- DAU / MAU
- 일일 대화 건수
- 평균 대화 시간
- 평균 평점
- 재방문율
- 한국/일본 유저 비율

### 목표 (MVP 출시 3개월)
- MAU 1,000명
- 일일 대화 100건
- 평균 대화 시간 10분
- 평균 평점 4.0 이상

---

**서로 말하고, 서로 배우다.**
**서로말**